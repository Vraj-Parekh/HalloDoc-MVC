@model List<AdminDashboardDTO>

@{
    ViewData["Title"] = "_NewStateTable";
}

@functions {
    public string GetColor(int RequestTypeId)
    {
        switch (RequestTypeId)
        {
            case 1: return "pink";
            case 2: return "green";
            case 3: return "orange";
            case 4: return "blue";
            default: return "green";
        }
    }

    public string showName(int Status)
    {
        switch (Status)
        {
            case 1: return "New";
            case 2: return "Pending";
            case 3: return "Active";
            case 4: return "Conclude";
            case 5: return "To close";
            case 6: return "Unpaid";
            default: return "Unknown";
        }
    }
}
<partial name="_CancelModalPartial" />
<partial name="_AssignModalPartial" />
<div class="table-responsive d-none d-sm-block">
    <table class="table" id="adminTable">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Date Of Birth</th>
                <th scope="col">Requestor</th>
                <th scope="col">Requested date</th>
                <th scope="col">Phone</th>
                <th scope="col">Address</th>
                <th scope="col">Notes</th>
                <th scope="col">Chat With</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody class="text-white">
            @foreach (var a in Model)
            {
                <tr class="align-middle table-@{
                                                @GetColor(a.RequestTypeId)
}" data-request-type="RequestTypeId">
                    <td scope="row">@a.Name, @a.RequestId</td>
                    <td>@a.Dob.ToString("MMM,dd yyyy")</td>
                    <td>@a.Requestor</td>
                    <td>@a.RequestedDate.ToString("MMM,dd yyyy")</td>
                    <td>
                        <div>
                            <span class="border border-white rounded p-2 text-nowrap"><i class="bi bi-telephone p-2"></i>@a.Phone</span>
                        </div>

                    </td>
                    <td>@a.Address</td>
                    <td>@a.Notes</td>
                    <td><button class="btn text-white border border-white">Provider</button></td>
                    <td>
                        <div class="dropdown">
                            <button class="btn text-white border border-white" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Action
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#assignModal"><i class="fa-regular fa-file-lines pe-2"></i>Assign Case</a></li>
                                <li><a class="dropdown-item cancelCase" onclick="SetCancelInfo(@a.RequestId, '@a.Name')"><i class="fa-solid fa-xmark me-1"></i>Cancel Case</a></li>
                                <li><a class="dropdown-item viewCase" href="@Url.Action("ViewCase", "Admin", new { requestId = a.RequestId })"><i class="fa-solid fa-file-signature pe-2"></i>View Case</a></li>
                                <li><a class="dropdown-item viewNotes" href="@Url.Action("ViewNotes", "Admin", new { requestId = a.RequestId })"><i class="fa-solid fa-book pe-2"></i>View Notes</a></li>
                                <li><a class="dropdown-item"><i class="fa-solid fa-ban pe-2"></i>Block Patient</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function () {
        $(".req_type").on("click", function () {
            var requestType = $(this).data("type");
            $("#adminTable tbody tr").show();
            $("#adminTable tbody tr").each(function () {
                var rowRequestType = $(this).data("request-type");
                if (rowRequestType != requestType) {
                    $(this).hide();
                } else {
                    $(this).show();
                }
            });
        });
    });
</script>

<script>
    $(document).ready(function () {

        $('#adminTable').DataTable({
            "initComplete": function (settings, json) {

                $('#my-search-input').val(settings.oPreviousSearch.sSearch);

                $('#my-search-input').on('keyup', function () {
                    var searchValue = $(this).val();
                    settings.oPreviousSearch.sSearch = searchValue;
                    settings.oApi._fnReDraw(settings);
                });
            },
            "lengthMenu": [[5, 10, -1], [5, 10, "All"]],
            "pageLength": 5,
            language: {
                oPaginate: {
                    sNext: '<i class="bi bi-caret-right-fill text-info"></i>',
                    sPrevious: '<i class="bi bi-caret-left-fill text-info"></i>'
                }
            }
        });
        $('.dataTables_filter').hide();
    });
</script>

